from selenium import webdriver
from selenium.webdriver.common.by import By
from lxml import html
import time

# Launch Chrome
driver = webdriver.Chrome()
driver.get("https://confluence.wellsfargo.net/display/CRC/CRA+Common+Code+Inventory")

# Give yourself 20â€“30 seconds to manually click and complete login
time.sleep(25)

# Get the full page HTML after login
page_source = driver.page_source
tree = html.fromstring(page_source)

# Extract the first table (or tweak for the exact one)
tables = tree.xpath('//table')
print(f"Found {len(tables)} tables")

# Example: Get rows and cells from the first table
if tables:
    rows = tables[0].xpath('.//tr')
    for row in rows:
        cells = row.xpath('.//th|.//td')
        print([cell.text_content().strip() for cell in cells])

# Close browser
driver.quit()
